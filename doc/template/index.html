<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>swarm-icons</title>

	<link rel="stylesheet" type="text/css" href="<!-- @echo STYLESHEET_FONT -->" />
	<link rel="stylesheet" type="text/css" href="<!-- @echo STYLESHEET_SQ -->" />

	<style type="text/css">
		.svg svg {
			stroke: transparent;
			fill: rgba(0,0,0,.54);
		}
		.gridList-item {
			margin-bottom: 32px;
		}
	</style>

</head>

<body>
	<div id="iconSprite" class="display--none">
		<!-- @include sprite.inc -->
	</div>

	<section class="stripe stripe--collection">
		<div class="bounds bounds--sideHeader">
			<div class="chunk bounds-header">
				<h1 class="text--display1 text--red">swarm icons</h1>
				<p class="chunk text--caption">version <!-- @echo VERSION --></p>
				<p><a class="link" href="https://github.com/meetup/swarm-icons">&larr; github</a></p>
			</div>

			<div class="padding--left">
				<div class="chunk border--top margin--top">
					<div class="chunk">
						<div class="row">
							<div class="row-item"><h2 class="text--big text--secondary padding--top">Meetup icons</h2></div>
							<div class="row-item row-item--shrink row valign--middle">
								<input type='checkbox' name='toggleSmall' id='toggleSmall' class='row-item row-item--shrink' />
								<label for='toggleSmall' class='row-item valign--middle'>Toggle small</label>
							</div>
						</div>
					</div>
					<ul id="iconListMeetup" class="padding--top gridList gridList--has3 atMedium_gridList--has4 atLarge_gridList--has5"></ul>
				</div>

				<div class="chunk border--top margin--top">
					<h2 class="text--big text--secondary padding--top">Third party icons</h2>
					<ul id="iconListExternal" class="padding--top gridList gridList--has3 atMedium_gridList--has4 atLarge_gridList--has5"></ul>
				</div>
			</div>
		</div>
	</section>

	<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
	<script type="text/javascript">
		var EXTERNAL_FLAG = 'external',
			$MEETUP_LIST,
			$EXTERNAL_LIST,
			template = [
				'<li class="gridList-item align--center iconIsSmall--__isSMALL__">',
					'<div>',
						'<span class="svg svg--__NAME__">',
							'<svg preserveAspectRatio="xMinYMin meet" width="__SIZE__" height="__SIZE__" viewBox="0 0 __SIZE__ __SIZE__" class="svg-icon">',
								'<use xlink:href="#icon-__NAME__"></use>',
							'</svg>',
						'</span>',
					'</div>',
					'<p class="text--small" style="margin-top: 4px;">__NAME__</p>',
				'</li>',
			].join('');

		function renderIcon( $targetEl, $symbol ) {
			var string = $symbol.attr('id'),
					expr = /small/;

			var isSmall = expr.test(string),
					renderSize = isSmall ? 18 : 42;

			$targetEl.append(
				template
					.replace( /__isSMALL__/g, isSmall )
					.replace( /__SIZE__/g, renderSize )
					.replace( /__NAME__/g, $symbol.attr('id').split('icon-')[1] )
			);
		}

		function createIconList( $symbols ) {
			console.log($TOGGLE_SMALL[0].checked);
			$symbols.each(function(i, symbol) {
				var $symbol = $(symbol);
				if ( $symbol.attr('id').indexOf(EXTERNAL_FLAG) > -1 ) {
					renderIcon($EXTERNAL_LIST, $symbol);
				} else {
					renderIcon($MEETUP_LIST, $symbol);
				}
			});
		}

		function toggleSmallIcons() {
			$TOGGLE_SMALL.on('change', function(){
				var toggleSmall = $(this)[0].checked;
				$('.iconIsSmall--true').toggleClass('display--none');
				$MEETUP_LIST.find('.iconIsSmall--false').toggleClass('display--none');
				console.log(toggleSmall);
			});
		}

		$(function() {
			$MEETUP_LIST = $('#iconListMeetup');
			$EXTERNAL_LIST = $('#iconListExternal');
			$TOGGLE_SMALL = $('#toggleSmall');
			createIconList($('#iconSprite svg symbol'));
			$('.iconIsSmall--true').addClass('display--none');
			toggleSmallIcons();
		});
	</script>

</body>
</html>
